<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for spec\Firefox\IPResolverSpec.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../prettify.css">
    <link rel="stylesheet" href="../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header high">
    <h1>Code coverage report for <span class="entity">spec\Firefox\IPResolverSpec.js</span></h1>
    <h2>
        Statements: <span class="metric">100% <small>(69 / 69)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">100% <small>(2 / 2)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">100% <small>(13 / 13)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">100% <small>(69 / 69)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">spec/Firefox/</a> &#187; IPResolverSpec.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">///&lt;reference path="../support/jasmine.d.ts" /&gt;
&nbsp;
"use strict";
&nbsp;
require("babel/register");
&nbsp;
var Constants = require("../../lib/Constants");
var IPResolver = require("../../lib/Firefox/IPResolver");
&nbsp;
describe("IPResolver", function () {
	var _sut;
	var _mockDnsService;
	var _mockUDP;
	beforeEach(function () {
		_mockDnsService = {};
		_mockUDP = {};
		_sut = new IPResolver(_mockDnsService, _mockUDP);
	});
&nbsp;
	describe("resolveIPs", function () {
		it("should return a promise which resolves with the result of the dnsService when the dnsService returns more than just localhost", function () {
			//arrange
			var myHostName = "myHostName";
			var mockRecord = jasmine.createSpyObj("mockRecord", ["hasMore", "getNextAddrAsString"]);
			var calls = 0;
			mockRecord.hasMore.and.callFake(function () {
				calls++;
				return calls &lt; 3;
			});
&nbsp;
			mockRecord.getNextAddrAsString.and.returnValue("127.0.0.1");
&nbsp;
			_mockDnsService.myHostName = myHostName;
			_mockDnsService.resolve = jasmine.createSpy("resolve").and.returnValue(mockRecord);
&nbsp;
			//act
			_sut.resolveIPs().then(function (actual) {
				//assert
				expect(_mockDnsService.resolve).toHaveBeenCalledWith(myHostName, 0);
				expect(mockRecord.getNextAddrAsString.calls.count()).toBe(2);
				expect(mockRecord.hasMore.calls.count()).toBe(3);
				expect(actual.length).toBe(2);
				expect(actual[0]).toBe("127.0.0.1");
				expect(actual[1]).toBe("127.0.0.1");
			});
		});
		it("should filter out any address that is not IPv4, and add localhost when it is not in the list", function () {
			//arrange
			var myHostName = "myHostName";
			var mockRecord = jasmine.createSpyObj("mockRecord", ["hasMore", "getNextAddrAsString"]);
			var calls = 0;
			mockRecord.hasMore.and.callFake(function () {
				calls++;
				return calls &lt; 3;
			});
&nbsp;
			mockRecord.getNextAddrAsString.and.callFake(function () {
				return calls &lt; 2 ? "not an IPv4 address" : "192.168.185.45";
			});
&nbsp;
			_mockDnsService.myHostName = myHostName;
			_mockDnsService.resolve = jasmine.createSpy("resolve").and.returnValue(mockRecord);
&nbsp;
			//act
			_sut.resolveIPs().then(function (actual) {
				//assert
				expect(_mockDnsService.resolve).toHaveBeenCalledWith(myHostName, 0);
				expect(mockRecord.getNextAddrAsString.calls.count()).toBe(2);
				expect(mockRecord.hasMore.calls.count()).toBe(3);
				expect(actual.length).toBe(2);
				expect(actual[0]).toBe("192.168.185.45");
				expect(actual[1]).toBe("127.0.0.1");
			});
		});
		it("should use the forceGetIP when dnsService only finds localhost", function () {
			//arrange
			var myHostName = "myHostName";
			var mockRecord = jasmine.createSpyObj("mockRecord", ["hasMore"]);
			var messageAddress = "messageAddress";
			var message = { fromAddr: { address: messageAddress } };
			mockRecord.hasMore.and.returnValue(false);
&nbsp;
			var mockUDPSocket = jasmine.createSpyObj("mockUDPSocket", ["joinMulticast", "asyncListen", "send", "port"]);
&nbsp;
			mockUDPSocket.asyncListen.and.callFake(function (packetReceivedObj) {
				var mockSocket = jasmine.createSpyObj("mockSocket", ["close"]);
				packetReceivedObj.onPacketReceived(mockSocket, message);
&nbsp;
				expect(mockSocket.close).toHaveBeenCalledWith();
			});
&nbsp;
			_mockUDP.createUDPSocket = jasmine.createSpy("mockCreateUDPSocket").and.returnValue(mockUDPSocket);
			_mockDnsService.myHostName = myHostName;
			_mockDnsService.resolve = jasmine.createSpy("resolve").and.returnValue(mockRecord);
&nbsp;
			//act
			_sut.resolveIPs().then(function (actual) {
				//assert
				expect(_mockUDP.createUDPSocket).toHaveBeenCalledWith();
				expect(mockUDPSocket.joinMulticast).toHaveBeenCalledWith(Constants.IPResolverMulticast);
				expect(mockUDPSocket.asyncListen).toHaveBeenCalledWith({ onPacketReceived: jasmine.any(Function) });
&nbsp;
				expect(actual.length).toBe(2);
				expect(actual[0]).toBe(messageAddress);
				expect(actual[1]).toBe("127.0.0.1");
				expect(mockUDPSocket.send).toHaveBeenCalledWith(Constants.IPResolverMulticast, mockUDPSocket.port, Constants.forceGetIPMessage, Constants.forceGetIPMessage.length);
			});
		});
	});
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlk6L1Byb2plY3RzL01vZHVsZXMvT21uaXNjaWVuY2UtU2RrLVJlc29sdmVyL3NwZWMvRmlyZWZveC9JUFJlc29sdmVyU3BlYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBRUEsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7O0FBRTFCLElBQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQ2pELElBQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDOztBQUUzRCxRQUFRLENBQUMsWUFBWSxFQUFFLFlBQVk7QUFDbEMsS0FBSSxJQUFJLENBQUM7QUFDVCxLQUFJLGVBQWUsQ0FBQztBQUNwQixLQUFJLFFBQVEsQ0FBQztBQUNiLFdBQVUsQ0FBQyxZQUFZO0FBQ3RCLGlCQUFlLEdBQUcsRUFBRSxDQUFDO0FBQ3JCLFVBQVEsR0FBRyxFQUFFLENBQUM7QUFDZCxNQUFJLEdBQUcsSUFBSSxVQUFVLENBQUMsZUFBZSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0VBQ2pELENBQUMsQ0FBQzs7QUFFSCxTQUFRLENBQUMsWUFBWSxFQUFFLFlBQVk7QUFDbEMsSUFBRSxDQUFDLCtIQUErSCxFQUFFLFlBQVk7O0FBRS9JLE9BQUksVUFBVSxHQUFHLFlBQVksQ0FBQztBQUM5QixPQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxDQUFDLFNBQVMsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDLENBQUM7QUFDeEYsT0FBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQ2QsYUFBVSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFlBQVk7QUFDM0MsU0FBSyxFQUFFLENBQUM7QUFDUixXQUFPLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDakIsQ0FBQyxDQUFDOztBQUVILGFBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDOztBQUU1RCxr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VyxDQUFDLFVBQVUsQ0FBQyxDQUFDOzs7QUFHbkYsT0FBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFVLE1BQU0sRUFBRTs7QUFFeEMsVUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0FBQ3hELFVBQU0sQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDeEYsVUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLGdCQUFnQixFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDOztBQUVwRyxVQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUM3QixVQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQ3ZDLFVBQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDcEMsVUFBTSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsbUJBQW1CLEVBQUUsYUFBYSxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsaUJBQWlCLEVBQUUsU0FBUyxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3BLLENBQUMsQ0FBQztHQUNILENBQUMsQ0FBQztFQUVILENBQUMsQ0FBQztDQUNILENBQUMsQ0FBQyIsImZpbGUiOiJZOi9Qcm9qZWN0cy9Nb2R1bGVzL09tbmlzY2llbmNlLVNkay1SZXNvbHZlci9zcGVjL0ZpcmVmb3gvSVBSZXNvbHZlclNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9zdXBwb3J0L2phc21pbmUuZC50c1wiIC8+XHJcblxyXG5yZXF1aXJlKFwiYmFiZWwvcmVnaXN0ZXJcIik7XHJcblxyXG5jb25zdCBDb25zdGFudHMgPSByZXF1aXJlKFwiLi4vLi4vbGliL0NvbnN0YW50c1wiKTtcclxuY29uc3QgSVBSZXNvbHZlciA9IHJlcXVpcmUoXCIuLi8uLi9saWIvRmlyZWZveC9JUFJlc29sdmVyXCIpO1xyXG5cclxuZGVzY3JpYmUoXCJJUFJlc29sdmVyXCIsIGZ1bmN0aW9uICgpIHtcclxuXHR2YXIgX3N1dDtcclxuXHR2YXIgX21vY2tEbnNTZXJ2aWNlO1xyXG5cdHZhciBfbW9ja1VEUDtcclxuXHRiZWZvcmVFYWNoKGZ1bmN0aW9uICgpIHtcclxuXHRcdF9tb2NrRG5zU2VydmljZSA9IHt9O1xyXG5cdFx0X21vY2tVRFAgPSB7fTtcclxuXHRcdF9zdXQgPSBuZXcgSVBSZXNvbHZlcihfbW9ja0Ruc1NlcnZpY2UsIF9tb2NrVURQKTtcclxuXHR9KTtcclxuXHJcblx0ZGVzY3JpYmUoXCJyZXNvbHZlSVBzXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdGl0KFwic2hvdWxkIHJldHVybiBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBkbnNTZXJ2aWNlIHdoZW4gdGhlIGRuc1NlcnZpY2UgcmV0dXJucyBtb3JlIHRoYW4ganVzdCBsb2NhbGhvc3RcIiwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQvL2FycmFuZ2VcclxuXHRcdFx0dmFyIG15SG9zdE5hbWUgPSBcIm15SG9zdE5hbWVcIjtcclxuXHRcdFx0dmFyIG1vY2tSZWNvcmQgPSBqYXNtaW5lLmNyZWF0ZVNweU9iaihcIm1vY2tSZWNvcmRcIiwgW1wiaGFzTW9yZVwiLCBcImdldE5leHRBZGRyQXNTdHJpbmdcIl0pO1xyXG5cdFx0XHR2YXIgY2FsbHMgPSAwO1xyXG5cdFx0XHRtb2NrUmVjb3JkLmhhc01vcmUuYW5kLmNhbGxGYWtlKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRjYWxscysrO1xyXG5cdFx0XHRcdHJldHVybiBjYWxscyA8IDM7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0bW9ja1JlY29yZC5nZXROZXh0QWRkckFzU3RyaW5nLmFuZC5yZXR1cm5WYWx1ZShcIjEyNy4wLjAuMVwiKTtcclxuXHJcblx0XHRcdF9tb2NrRG5zU2VydmljZS5teUhvc3ROYW1lID0gbXlIb3N0TmFtZTtcclxuXHRcdFx0X21vY2tEbnNTZXJ2aWNlLnJlc29sdmUgPSBqYXNtaW5lLmNyZWF0ZVNweShcInJlc29sdmVcIikuYW5kLnJldHVyblZhbHVlKG1vY2tSZWNvcmQpO1xyXG5cclxuXHRcdFx0Ly9hY3RcclxuXHRcdFx0X3N1dC5yZXNvbHZlSVBzKCkudGhlbihmdW5jdGlvbiAoYWN0dWFsKSB7IFxyXG5cdFx0XHRcdC8vYXNzZXJ0XHJcblx0XHRcdFx0ZXhwZWN0KF9tb2NrRG5zU2VydmljZS5yZXNvbHZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChteUhvc3ROYW1lLCAwKTtcclxuXHRcdFx0XHRleHBlY3QobW9ja1JlY29yZC5nZXROZXh0QWRkckFzU3RyaW5nLmNhbGxzLmNvdW50KCkpLnRvQmUoMik7XHJcblx0XHRcdFx0ZXhwZWN0KG1vY2tSZWNvcmQuaGFzTW9yZS5jYWxscy5jb3VudCgpKS50b0JlKDMpO1xyXG5cdFx0XHRcdGV4cGVjdChhY3R1YWwubGVuZ3RoKS50b0JlKDIpO1xyXG5cdFx0XHRcdGV4cGVjdChhY3R1YWxbMF0pLnRvQmUoXCIxMjcuMC4wLjFcIik7XHJcblx0XHRcdFx0ZXhwZWN0KGFjdHVhbFsxXSkudG9CZShcIjEyNy4wLjAuMVwiKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHRcdGl0KFwic2hvdWxkIGZpbHRlciBvdXQgYW55IGFkZHJlc3MgdGhhdCBpcyBub3QgSVB2NCwgYW5kIGFkZCBsb2NhbGhvc3Qgd2hlbiBpdCBpcyBub3QgaW4gdGhlIGxpc3RcIiwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQvL2FycmFuZ2VcclxuXHRcdFx0dmFyIG15SG9zdE5hbWUgPSBcIm15SG9zdE5hbWVcIjtcclxuXHRcdFx0dmFyIG1vY2tSZWNvcmQgPSBqYXNtaW5lLmNyZWF0ZVNweU9iaihcIm1vY2tSZWNvcmRcIiwgW1wiaGFzTW9yZVwiLCBcImdldE5leHRBZGRyQXNTdHJpbmdcIl0pO1xyXG5cdFx0XHR2YXIgY2FsbHMgPSAwO1xyXG5cdFx0XHRtb2NrUmVjb3JkLmhhc01vcmUuYW5kLmNhbGxGYWtlKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRjYWxscysrO1xyXG5cdFx0XHRcdHJldHVybiBjYWxscyA8IDM7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0bW9ja1JlY29yZC5nZXROZXh0QWRkckFzU3RyaW5nLmFuZC5jYWxsRmFrZShmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0cmV0dXJuIGNhbGxzIDwgMiA/IFwibm90IGFuIElQdjQgYWRkcmVzc1wiIDogXCIxOTIuMTY4LjE4NS40NVwiO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdF9tb2NrRG5zU2VydmljZS5teUhvc3ROYW1lID0gbXlIb3N0TmFtZTtcclxuXHRcdFx0X21vY2tEbnNTZXJ2aWNlLnJlc29sdmUgPSBqYXNtaW5lLmNyZWF0ZVNweShcInJlc29sdmVcIikuYW5kLnJldHVyblZhbHVlKG1vY2tSZWNvcmQpO1xyXG5cclxuXHRcdFx0Ly9hY3RcclxuXHRcdFx0X3N1dC5yZXNvbHZlSVBzKCkudGhlbihmdW5jdGlvbiAoYWN0dWFsKSB7IFxyXG5cdFx0XHRcdC8vYXNzZXJ0XHJcblx0XHRcdFx0ZXhwZWN0KF9tb2NrRG5zU2VydmljZS5yZXNvbHZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChteUhvc3ROYW1lLCAwKTtcclxuXHRcdFx0XHRleHBlY3QobW9ja1JlY29yZC5nZXROZXh0QWRkckFzU3RyaW5nLmNhbGxzLmNvdW50KCkpLnRvQmUoMik7XHJcblx0XHRcdFx0ZXhwZWN0KG1vY2tSZWNvcmQuaGFzTW9yZS5jYWxscy5jb3VudCgpKS50b0JlKDMpO1xyXG5cdFx0XHRcdGV4cGVjdChhY3R1YWwubGVuZ3RoKS50b0JlKDIpO1xyXG5cdFx0XHRcdGV4cGVjdChhY3R1YWxbMF0pLnRvQmUoXCIxOTIuMTY4LjE4NS40NVwiKTtcclxuXHRcdFx0XHRleHBlY3QoYWN0dWFsWzFdKS50b0JlKFwiMTI3LjAuMC4xXCIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdFx0aXQoXCJzaG91bGQgdXNlIHRoZSBmb3JjZUdldElQIHdoZW4gZG5zU2VydmljZSBvbmx5IGZpbmRzIGxvY2FsaG9zdFwiLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdC8vYXJyYW5nZVxyXG5cdFx0XHR2YXIgbXlIb3N0TmFtZSA9IFwibXlIb3N0TmFtZVwiO1xyXG5cdFx0XHR2YXIgbW9ja1JlY29yZCA9IGphc21pbmUuY3JlYXRlU3B5T2JqKFwibW9ja1JlY29yZFwiLCBbXCJoYXNNb3JlXCJdKTtcclxuXHRcdFx0dmFyIG1lc3NhZ2VBZGRyZXNzID0gXCJtZXNzYWdlQWRkcmVzc1wiO1xyXG5cdFx0XHR2YXIgbWVzc2FnZSA9IHsgZnJvbUFkZHI6IHsgYWRkcmVzczogbWVzc2FnZUFkZHJlc3MgfSB9O1xyXG5cdFx0XHRtb2NrUmVjb3JkLmhhc01vcmUuYW5kLnJldHVyblZhbHVlKGZhbHNlKTtcclxuXHJcblx0XHRcdHZhciBtb2NrVURQU29ja2V0ID0gamFzbWluZS5jcmVhdGVTcHlPYmooXCJtb2NrVURQU29ja2V0XCIsIFtcImpvaW5NdWx0aWNhc3RcIiwgXCJhc3luY0xpc3RlblwiLCBcInNlbmRcIiwgXCJwb3J0XCJdKTtcclxuXHJcblx0XHRcdG1vY2tVRFBTb2NrZXQuYXN5bmNMaXN0ZW4uYW5kLmNhbGxGYWtlKGZ1bmN0aW9uIChwYWNrZXRSZWNlaXZlZE9iaikge1xyXG5cdFx0XHRcdHZhciBtb2NrU29ja2V0ID0gamFzbWluZS5jcmVhdGVTcHlPYmooXCJtb2NrU29ja2V0XCIsIFtcImNsb3NlXCJdKTtcclxuXHRcdFx0XHRwYWNrZXRSZWNlaXZlZE9iai5vblBhY2tldFJlY2VpdmVkKG1vY2tTb2NrZXQsIG1lc3NhZ2UpO1xyXG5cclxuXHRcdFx0XHRleHBlY3QobW9ja1NvY2tldC5jbG9zZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoKTtcclxuXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0X21vY2tVRFAuY3JlYXRlVURQU29ja2V0ID0gamFzbWluZS5jcmVhdGVTcHkoXCJtb2NrQ3JlYXRlVURQU29ja2V0XCIpLmFuZC5yZXR1cm5WYWx1ZShtb2NrVURQU29ja2V0KTtcclxuXHRcdFx0X21vY2tEbnNTZXJ2aWNlLm15SG9zdE5hbWUgPSBteUhvc3ROYW1lO1xyXG5cdFx0XHRfbW9ja0Ruc1NlcnZpY2UucmVzb2x2ZSA9IGphc21pbmUuY3JlYXRlU3B5KFwicmVzb2x2ZVwiKS5hbmQucmV0dXJuVmFsdWUobW9ja1JlY29yZCk7XHJcblxyXG5cdFx0XHQvL2FjdFxyXG5cdFx0XHRfc3V0LnJlc29sdmVJUHMoKS50aGVuKGZ1bmN0aW9uIChhY3R1YWwpIHtcclxuXHRcdFx0XHQvL2Fzc2VydFxyXG5cdFx0XHRcdGV4cGVjdChfbW9ja1VEUC5jcmVhdGVVRFBTb2NrZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCk7XHJcblx0XHRcdFx0ZXhwZWN0KG1vY2tVRFBTb2NrZXQuam9pbk11bHRpY2FzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoQ29uc3RhbnRzLklQUmVzb2x2ZXJNdWx0aWNhc3QpO1xyXG5cdFx0XHRcdGV4cGVjdChtb2NrVURQU29ja2V0LmFzeW5jTGlzdGVuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7IG9uUGFja2V0UmVjZWl2ZWQ6IGphc21pbmUuYW55KEZ1bmN0aW9uKSB9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRleHBlY3QoYWN0dWFsLmxlbmd0aCkudG9CZSgyKVxyXG5cdFx0XHRcdGV4cGVjdChhY3R1YWxbMF0pLnRvQmUobWVzc2FnZUFkZHJlc3MpO1xyXG5cdFx0XHRcdGV4cGVjdChhY3R1YWxbMV0pLnRvQmUoJzEyNy4wLjAuMScpO1xyXG5cdFx0XHRcdGV4cGVjdChtb2NrVURQU29ja2V0LnNlbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKENvbnN0YW50cy5JUFJlc29sdmVyTXVsdGljYXN0LCBtb2NrVURQU29ja2V0LnBvcnQsIENvbnN0YW50cy5mb3JjZUdldElQTWVzc2FnZSwgQ29uc3RhbnRzLmZvcmNlR2V0SVBNZXNzYWdlLmxlbmd0aCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdH0pO1xyXG59KTsiXX0=</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Jun 27 2015 17:35:50 GMT-0500 (Central Daylight Time)</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
